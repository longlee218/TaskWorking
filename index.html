<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style/bootstrap-4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="style/bootstrap-4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="/style/css/style.css">
    <link rel="stylesheet" href="CalendarPickerJS-master/CalendarPickerJS-master/CalendarPicker_style.css">
    <title>Task Working</title>
</head>
<body>
    <div class="container-fluid">
        <section class="content-header">
            <h3 class="page-header">Danh sách công việc</h3>
        </section>
        <section class="content">
            <div class="row">
                <div class="col col-12 search-bar row">
                    <div class="input-group mb-3 col-12">
                        <div class="input-group-prepend">
                          <button class="btn btn-outline-secondary" type="button" id="btn-list-project" name="list-project" onclick="displayProject()">Các dự án <i class="fas fa-caret-down"></i></button>
                        </div>
                        <input type="search" class="search-expand" placeholder="Dự án" aria-label="Example text with button addon" aria-describedby="button-addon1">
                    </div>
                </div>
                <div class="col col-12 body-content">
                    <div class="board-left">
                        <button class="btn btn-sm btn-secondary btn-control" id onclick="displayControlBoard()">Điều khiển <i class="fas fa-caret-down"></i></button>
                        <p class="project-name" id="project-title">Dự án AKB One</p>
                        <span class="vertical-line">|</span>
                        <div class="list-member row">
                            <a href="#" class="circleUser" style="position: relative;" id="1" onclick="displayInfo(this)">LH</a>
                            <a href="#" class="circleUser circle-next circleInfo" id="2" onclick="displayInfo(this)">HB</a>
                            <a href="#" class="circleUser circle-next" id="3" onclick="displayInfo(this)">NP</a>
                            <a href="#" class="circleUser circle-next" id="4" onclick="displayInfo(this)">TD</a>
                            <a href="#" class="circleUser circle-next" id="5"><small>15+</small></a>
                        </div>
                        <button class="btn btn-sm btn-secondary" onclick="displayAddUser(this)">Thêm</button>
                        <!-- <span class="vertical-line ml-3 mr-3">|</span> -->
                        <!-- <div class="progress-board">
                            <div class="progress" style="transform: translateY(1em);">
                                <div class="progress-bar bg-primary" role="progressbar" style="width: 25%" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100">25%</div>
                                <div class="progress-bar bg-warning" role="progressbar" style="width: 75%" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100">75%</div>
                            </div>
                            <p class="line-hidden">Dòng này sinh ra để set chiều dài trong thanh progress trong thẻ flex</p>
                        </div> -->
                    </div>
                    <div class="board-center" style="width: 10em;"></div>
                    <div class="btn-group" role="group" aria-label="Basic example">
                        <button type="button" class="btn btn-sm btn-secondary" onclick="displayCalendar()">
                            <i class="fa fa-calendar" aria-hidden="true"></i>
                            Lịch</button>
                        <button type="button" class="btn btn-sm btn-secondary ml-2">
                            <i class="fa fa-question" aria-hidden="true"></i>
                            Câu hỏi</button>
                      </div>
                </div>
            </div>
            <div class="form-list-project" id="form-project">
                <div name="recently-project">
                    <div class="card" style="border: none;">
                        <div class="title-option p-2">
                          <p class="text-secondary">
                            <i class="fa fa-clock" aria-hidden="true"></i>  
                            Các dự án gần đây</p>
                        </div>
                        <div class="small">
                            <a href="#" class="list-group-item list-group-item-action">Dự án AKB One</a>
                            <a href="#" class="list-group-item list-group-item-action">Dự án ILANCA</a>
                            <a href="#" class="list-group-item list-group-item-action">Dự án cây gia phả</a>
                        </div>
                    </div>
                </div>
                <div name="all-project" class="mt-2">
                    <div class="card" style="border: none;">
                        <div class="title-option p-2">
                          <p class="text-secondary">
                            <i class="fa fa-list-alt" aria-hidden="true"></i>
                            Các dự án công ty</p>
                        </div>
                        <div class="small">
                            <a href="#" class="list-group-item list-group-item-action">Dự án AKB One</a>
                            <a href="#" class="list-group-item list-group-item-action">Dự án ILANCA</a>
                            <a href="#" class="list-group-item list-group-item-action">Dự án cây gia phả</a>
                            <a href="#" class="list-group-item list-group-item-action">Dự án IOT Nhật</a>
                            <a href="#" class="list-group-item list-group-item-action">Dự án moblie</a>
                            <a href="#" class="list-group-item list-group-item-action">Dự án AI khách hàng</a>
                    </div>
                </div>
            </div>
            </div>
            <div class="dashboard-more row">
                <div class="col col-12">
                    <div class="dashboard-project" id="constrol-board" style="width: 20em; position: absolute;">
                        <ul class="list-group">
                            <li class="list-group-item">
                                <div class="pop-over-list-item" role="button">
                                    <span name="title-item">
                                        <span class="">Icon</span>
                                        <span class="title">Lịch</span>
                                    </span>
                                </div>
                                <div class="description-list-item">
                                    <small>Thời gian làm việc của mọi người</small>
                                </div>
                            </li>
                            <li class="list-group-item">
                                <div class="pop-over-list-item" role="button">
                                    <span name="title-item">
                                        <span class="">Icon</span>
                                        <span class="title">Q&A</span>
                                    </span>
                                </div>
                                <div class="description-list-item">
                                    <small>Các câu hỏi của mọi người</small>
                                </div>
                            </li>
                            <li class="list-group-item">
                                <div class="pop-over-list-item" role="button">
                                    <span name="title-item">
                                        <span class="">Icon</span>
                                        <span class="title">Bảng chính</span>
                                    </span>
                                </div>
                                <div class="description-list-item">
                                    <small>Danh sách các task project</small>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div class="more-info" name="info-user" id="pop-user-info">
                        <div class="card" style="width: 20rem;">
                            <div class="card-body">
                                <div class="info mb-2" style="display: flex; align-items: center;">
                                    <a class="circleUser-large" >LL</a>
                                    <div class="ml-3">
                                        <span class="text-user" name="username">Lê Hoàng Long</span>
                                        <a href="#" style="color: rgba(56, 159, 228, 0.671);"><small>longlehoang2013@gmail.com</small></a>
                                    </div>
                                </div>
                                <small class="card-text text-secondary">Thay đổi quyền......( Quản trị viên )</small>
                                <br>
                                <a class="card-text" href="#"><small>Xem hoạt động trong dự án</small></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-add-user" id="form-add-user">
                <div class="d-flex justify-content-center">
                    <p>Thêm nhân lực</p>
                </div>
                <form class="">
                    <div class="form-group">
                        <input class="form-control small" type="text" placeholder="Tìm kiếm nhân viên">
                    </div>
                    <div class="form-group">
                        <div class="small">
                            <a href="#" class="list-group-item list-group-item-action">Bùi Minh Chiến</a>
                            <a href="#" class="list-group-item list-group-item-action">Lê Hoàng Long</a>
                            <a href="#" class="list-group-item list-group-item-action">Nguyễn Tuấn Anh</a>
                          
                        </div>
                    </div>
                    <div class="form-group">
                        <button class="btn btn-primary btn-block">Thêm</button>
                    </div>
                </form>
            </div>
            <div id="myCalendarWrapper" style="display: none; min-width: 98%; min-height: 75%; border: 1px solid gray; margin-top: 1em; padding: 1em 2em; background-color: white;"></div>
        </section>
        <section class="content pt-4 pb-4" id="content-task" style="position: relative;">
            <div class="row">
                <div class="col col-3">
                    <div class="card" id="card-to-do">
                        <div class="card-header">
                          <b>Công việc cần làm</b>
                        </div>
                        <div class="card-body list-card">
                           <ul class="list-group">
                               <li class="small">
                                   <input type="text" value="Chỉnh lại estimate" disabled class="form-control pt-3 pb-3">
                               </li>
                               <li class="small">
                                    <input type="text" value="Đánh giá chi phí rủi ro" disabled class="form-control pt-3 pb-3">
                                </li>
                                <li class="small">
                                    <input type="text" value="Bản dịch tiếng nhật và sơ đồ hoạt động" disabled class="form-control pt-3 pb-3">
                                </li>
                           </ul>
                           <textarea class="form-control mt-2" rows="3" placeholder="Tiêu đề cho task..." style="display: none;"></textarea>
                        </div>
                        <!-- data-toggle="modal" data-target="#modalInsertTask" -->
                        <div class="card-footer">
                            <button class="btn text-secondary" onclick="addNewTask(this)" name="button-new-task">
                                <span>+</span>
                                Thêm task khác
                            </button>
                            <div class="group-button" style="display: none;">
                                <button class="btn btn-success" name="button-save-task">Lưu</button>
                                <button class="btn btn-sencondary" name="button-cancel-task" onclick="cancelTask(this)"><i class="fa fa-times" aria-hidden="true"></i></button>
                            </div>
                        </div>
                      </div>
                </div>
                <div class="col col-3">
                    <div class="card" id="card-doing">
                        <div class="card-header">
                          <b>Công việc đang thực hiện</b>
                        </div>
                        <div class="card-body list-card">
                            <ul class="list-group">
                                <li class="small">
                                    <input type="text" value="Chỉnh lại estimate" disabled class="form-control pt-3 pb-3">
                                </li>
                                <li class="small">
                                     <input type="text" value="Đánh giá chi phí rủi ro" disabled class="form-control pt-3 pb-3">
                                 </li>
                                 <li class="small">
                                     <input type="text" value="Bản dịch tiếng nhật và sơ đồ hoạt động" disabled class="form-control pt-3 pb-3">
                                 </li>
                            </ul>
                            <textarea class="form-control mt-2" rows="3" placeholder="Tiêu đề cho task..." style="display: none;"></textarea>
                         </div>
                         <!-- data-toggle="modal" data-target="#modalInsertTask" -->
                         <div class="card-footer">
                             <button class="btn text-secondary" onclick="addNewTask(this)" name="button-new-task">
                                 <span>+</span>
                                 Thêm task khác
                             </button>
                             <div class="group-button" style="display: none;">
                                 <button class="btn btn-success" name="button-save-task">Lưu</button>
                                 <button class="btn btn-sencondary" name="button-cancel-task" onclick="cancelTask(this)"><i class="fa fa-times" aria-hidden="true"></i></button>
                             </div>
                         </div>
                      </div>
                </div>
                <div class="col col-3">
                    <div class="card" id="card-review">
                        <div class="card-header">
                          <b>Các công việc đang đánh giá</b>
                        </div>
                        <div class="card-body list-card">
                            <ul class="list-group">
                                <li class="small">
                                    <input type="text" value="Chỉnh lại estimate" disabled class="form-control pt-3 pb-3">
                                </li>
                                <li class="small">
                                     <input type="text" value="Đánh giá chi phí rủi ro" disabled class="form-control pt-3 pb-3">
                                 </li>
                                 <li class="small">
                                     <input type="text" value="Bản dịch tiếng nhật và sơ đồ hoạt động" disabled class="form-control pt-3 pb-3">
                                 </li>
                            </ul>
                            <textarea class="form-control mt-2" rows="3" placeholder="Tiêu đề cho task..." style="display: none;"></textarea>
                         </div>
                         <!-- data-toggle="modal" data-target="#modalInsertTask" -->
                         <div class="card-footer">
                             <button class="btn text-secondary" onclick="addNewTask(this)" name="button-new-task">
                                 <span>+</span>
                                 Thêm task khác
                             </button>
                             <div class="group-button" style="display: none;">
                                 <button class="btn btn-success" name="button-save-task">Lưu</button>
                                 <button class="btn btn-sencondary" name="button-cancel-task" onclick="cancelTask(this)"><i class="fa fa-times" aria-hidden="true"></i></button>
                             </div>
                         </div>
                      </div>
                </div>
                <div class="col col-3">
                    <div class="card" id="card-done">
                        <div class="card-header">
                          <b>Các công việc hoàn thành</b>
                        </div>
                        <div class="card-body list-card">
                            <ul class="list-group">
                                <li class="small">
                                    <input type="text" value="Chỉnh lại estimate" disabled class="form-control pt-3 pb-3">
                                </li>
                                <li class="small">
                                     <input type="text" value="Đánh giá chi phí rủi ro" disabled class="form-control pt-3 pb-3">
                                 </li>
                                 <li class="small">
                                     <input type="text" value="Bản dịch tiếng nhật và sơ đồ hoạt động" disabled class="form-control pt-3 pb-3">
                                 </li>
                            </ul>
                            <textarea class="form-control mt-2" rows="3" placeholder="Tiêu đề cho task..." style="display: none;"></textarea>
                         </div>
                         <!-- data-toggle="modal" data-target="#modalInsertTask" -->
                         <div class="card-footer">
                             <button class="btn text-secondary" onclick="addNewTask(this)" name="button-new-task">
                                 <span>+</span>
                                 Thêm task khác
                             </button>
                             <div class="group-button" style="display: none;">
                                 <button class="btn btn-success" name="button-save-task">Lưu</button>
                                 <button class="btn btn-sencondary" name="button-cancel-task" onclick="cancelTask(this)"><i class="fa fa-times" aria-hidden="true"></i></button>
                             </div>
                         </div>
                      </div>
                </div>
            </div>
        </section>
    </div>
    <!-- <div class="modal fade" id="modalInsertTask" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">New message</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <form>
                <div class="form-group">
                  <label for="recipient-name" class="col-form-label">Recipient:</label>
                  <input type="text" class="form-control" id="recipient-name">
                </div>
                <div class="form-group">
                  <label for="message-text" class="col-form-label">Message:</label>
                  <textarea class="form-control" id="message-text"></textarea>
                </div>
              </form>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
              <button type="button" class="btn btn-primary">Send message</button>
            </div>
          </div>
        </div>
      </div> -->
    <script src="style/js/index.js"></script>
    <script src="/CalendarPickerJS-master/CalendarPickerJS-master/CalendarPicker.js"></script>
</body>
</html>
<script>
    const addNewTask = (e) => {
        const  id = $(e).parent().parent().attr('id');
        const card = $('#'+id);
        $(card).find('.list-card textarea').css('display', 'block')
        $(card).find('.card-footer button[name="button-new-task"]').css('display', 'none');
        $(card).find('.card-footer .group-button').css('display', 'block');
    }
    const cancelTask = (e) => {
        const id = $(e).parent().parent().parent().attr('id')
        const card = $('#'+id)
        $(card).find('.list-card textarea').css('display', 'none')
        $(card).find('.card-footer button[name="button-new-task"]').css('display', 'block');
        $(card).find('.card-footer .group-button').css('display', 'none');
    }

    const displayCalendar = () => {
        $('#myCalendarWrapper').toggle()
    }
    const displayAddUser = (e) => {
        const position = $(e).position()
        console.log(position)
        $('#form-add-user').css('left', (position.left)+'px')
        $('#form-add-user').toggle()
    }

    const displayProject = () => {
        $('#form-project').toggle()
    }

    const displayInfo = (e) => {
        const current_postion =  $(e).position()
        $('#pop-user-info').css('left', (current_postion.left+20)+'px')
        $('#pop-user-info').css('top', (current_postion.top-12)+'px')
        $('#pop-user-info').toggle()

    }
    const displayControlBoard = () => {
        $('#constrol-board').toggle()
    }

    const title_project = $('#project-title')
    if(title_project.width() > 400){
        $('.project-name').css('width', '25em')
    }




    const nextYear = new Date().getFullYear() + 1;
    const myCalender = new CalendarPicker('#myCalendarWrapper', {
      max: new Date(nextYear, 10) 
});

    // $(document).mouseup(e => {
    //     console.log($('#form-add-user').has(e.target).length)
    //     if ((! $('#pop-user-info').is(e.target) && $('#pop-user-info').has(e.target) !== 0)  || 
    //         (! $('#constrol-board').is(e.target) && $('#constrol-board').has(e.target) !== 0) ||
    //         (! $('#form-add-user').is(e.target) && $('#form-add-user').has(e.target).length) !== 0 
    //         ) 
    //     {
    //         $('#form-add-user').removeClass('is-active');
    //         $('#pop-user-info').removeClass('is-active');
    //         $('#constrol-board').removeClass('is-active');
    //     }
    // });
</script>